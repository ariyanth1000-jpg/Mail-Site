<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Live Number Panel</title>

<style>
:root{
  --bg:#070A13;
  --bg2:#0B1530;
  --border:rgba(255,255,255,.14);
  --text:#EEF3FF;
  --muted:#A7B3D1;
  --blue1:#4F8CFF;
  --blue2:#2563EB;
  --teal1:#34D399;
  --teal2:#10B981;
}

/* ===== RESET ===== */
*{box-sizing:border-box;margin:0;padding:0;}
body{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:system-ui,sans-serif;
  background:linear-gradient(135deg,var(--bg),var(--bg2));
  color:var(--text);
  overflow-x:hidden;
}

/* ===== CARD ===== */
.card{
  width:520px;
  max-width:95vw;
  background:rgba(255,255,255,.08);
  border-radius:20px;
  padding:16px;
  position:relative;
  overflow:hidden;
  font-size:clamp(12px,1.1vw,16px);
  border:2px solid transparent;

  /* FLOWING RAINBOW GLOW */
  box-shadow:0 0 20px red;
  animation: rainbowFlow 8s linear infinite;
}

@keyframes rainbowFlow{
  0%{box-shadow:0 0 20px red,0 0 40px red,0 0 60px red,0 0 80px red;}
  12.5%{box-shadow:0 0 20px orange,0 0 40px orange,0 0 60px orange,0 0 80px orange;}
  25%{box-shadow:0 0 20px yellow,0 0 40px yellow,0 0 60px yellow,0 0 80px yellow;}
  37.5%{box-shadow:0 0 20px green,0 0 40px green,0 0 60px green,0 0 80px green;}
  50%{box-shadow:0 0 20px blue,0 0 40px blue,0 0 60px blue,0 0 80px blue;}
  62.5%{box-shadow:0 0 20px navy,0 0 40px navy,0 0 60px navy,0 0 80px navy;}
  75%{box-shadow:0 0 20px aqua,0 0 40px aqua,0 0 60px aqua,0 0 80px aqua;}
  87.5%{box-shadow:0 0 20px pink,0 0 40px pink,0 0 60px pink,0 0 80px pink;}
  100%{box-shadow:0 0 20px red,0 0 40px red,0 0 60px red,0 0 80px red;}
}

/* ===== TOP ===== */
.top{
  display:flex;
  justify-content:space-between;
  margin-bottom:12px;
  flex-wrap:nowrap;
}
.title,.sub,.badge{
  white-space:nowrap;
  font-size:clamp(12px,1.2vw,16px);
}
.title{font-weight:900}
.sub{color:var(--muted)}
.badge{
  border:1px solid var(--border);
  padding:6px 10px;
  border-radius:999px;
}

/* ===== PANEL ===== */
.panel{
  background:rgba(0,0,0,.25);
  border:1px solid var(--border);
  border-radius:18px;
  padding:14px;
  position:relative;
  overflow:hidden;
}
.panel::after{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(120deg,
    transparent 0%,
    rgba(79,140,255,.15),
    rgba(52,211,153,.15),
    rgba(168,85,247,.15),
    transparent 100%);
  animation:innerSweep 4s linear infinite;
  pointer-events:none;
}
@keyframes innerSweep{
  from{transform:translateX(-100%)}
  to{transform:translateX(100%)}
}

/* ===== SERVICES ===== */
.ticks{
  display:flex;
  gap:10px;
  margin-bottom:12px;
  flex-wrap:nowrap;
}
.tick{
  flex:1;
  border:1px solid var(--border);
  border-radius:14px;
  padding:12px;
  display:flex;
  gap:8px;
  align-items:center;
  font-weight:900;
  cursor:pointer;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.tick input{accent-color:var(--blue2)}
.tick.active{
  background:linear-gradient(135deg,var(--blue1),var(--blue2));
  color:#fff;
}

/* ===== GRID ===== */
.grid{
  display:grid;
  grid-template-columns:1fr 140px;
  gap:12px;
}
.box{
  border:1px solid var(--border);
  border-radius:16px;
  padding:12px;
  overflow:hidden;
}
.label{
  font-size:clamp(10px,1vw,12px);
  color:var(--muted);
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.value,.rem{
  font-weight:900;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.value{font-size:clamp(18px,2vw,24px)}
.rem{font-size:clamp(22px,2.5vw,28px);text-align:center}

/* ===== ACTIONS ===== */
.actions{
  margin-top:12px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}
button{
  border:none;
  border-radius:16px;
  padding:12px;
  font-weight:900;
  cursor:pointer;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.btnBuy{
  background:linear-gradient(135deg,var(--blue1),var(--blue2));
  color:#fff;
}
.btnCopy{
  background:linear-gradient(135deg,var(--teal1),var(--teal2));
  color:#052016;
}

/* ===== HISTORY ===== */
.history-wrap{margin-top:14px}
.history-title{
  display:flex;
  justify-content:center;
  align-items:center;
  font-weight:900;
  font-size:clamp(12px,1.1vw,14px);
  white-space:nowrap;
  margin-bottom:10px;
  letter-spacing:1px;
  padding:4px 12px;
  border-radius:12px;
  background:rgba(0,0,0,0.1);
}
.history{
  display:grid;
  gap:8px;
}
.hbox{
  border:1px dashed var(--border);
  border-radius:14px;
  height:42px;
  padding:0 12px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  white-space:nowrap;
  font-weight:900;
  overflow:hidden;
  text-overflow:ellipsis;
  background:rgba(0,0,0,0.1);
}

/* ===== SERVICE BADGE INSIDE HISTORY ===== */
.hservice{
  font-size:clamp(10px,0.9vw,11px);
  padding:4px 8px;
  border-radius:999px;
  border:1px solid var(--border);
  color:var(--muted);
}

/* ===== GET CODE ===== */
.getcode{
  margin-top:12px;
  width:100%;
  background:linear-gradient(135deg,#6366f1,#9333ea);
  color:#fff;
  border-radius:16px;
  padding:12px;
  font-weight:900;
  cursor:pointer;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

/* ===== TOAST ===== */
.toast{
  position:fixed;
  top:12px;
  left:50%;
  transform:translateX(-50%);
  background:rgba(0,0,0,.6);
  border:1px solid var(--border);
  padding:10px 14px;
  border-radius:14px;
  font-weight:900;
  white-space:nowrap;
  opacity:0;
  transition:.2s;
  overflow:hidden;
  text-overflow:ellipsis;
}
.toast.show{opacity:1}
</style>
</head>

<body>

<div class="toast" id="toast"></div>

<div class="card">
  <div class="top">
    <div>
      <div class="title">Live Number Panel</div>
      <div class="sub">Created by Tamim</div>
    </div>
    <div class="badge">LIVE</div>
  </div>

  <div class="panel">

    <div class="ticks">
      <label class="tick active" data-service="facebook">
        <input type="radio" name="service" checked>Facebook
      </label>
      <label class="tick" data-service="instagram">
        <input type="radio" name="service">Instagram
      </label>
    </div>

    <div class="grid">
      <div class="box">
        <div class="label">Number</div>
        <div class="value" id="phone"></div>
      </div>
      <div class="box">
        <div class="label">Remaining</div>
        <div class="rem" id="remaining">0</div>
      </div>
    </div>

    <div class="actions">
      <button class="btnBuy" id="btnBuy">Buy Number</button>
      <button class="btnCopy" id="btnCopy">Copy</button>
    </div>

    <div class="history-wrap">
      <div class="history-title">NUMBER HISTORY</div>
      <div class="history" id="history"></div>
      <button class="getcode" id="getcode">Get Code</button>
    </div>

  </div>
</div>

<script>
const URL="https://script.google.com/macros/s/AKfycbyNFudsbr0Tr0luiZ0gYAb6-lLNF5_MXFPcew-7z1QA__I5LpV_7b4dBmUIi5LR_SWeRg/exec";
const GETCODE="https://www.ivasms.com/portal/sms/received";
const HKEY="history3";

const phoneEl=document.getElementById("phone");
const remEl=document.getElementById("remaining");
const toast=document.getElementById("toast");
const historyEl=document.getElementById("history");

function showToast(t){toast.textContent=t;toast.classList.add("show");setTimeout(()=>toast.classList.remove("show"),1200);}

/* service */
function getService(){return localStorage.getItem("service")||"facebook";}
function setService(v){localStorage.setItem("service",v);document.querySelectorAll(".tick").forEach(t=>{t.classList.toggle("active",t.dataset.service===v);t.querySelector("input").checked=t.dataset.service===v;});}

/* history */
function loadHistory(){return JSON.parse(localStorage.getItem(HKEY)||"[]");}
function saveHistory(h){localStorage.setItem(HKEY,JSON.stringify(h.slice(0,3)));}
function addHistory(num){if(!num) return;let h=loadHistory();h.unshift({n:num,s:getService()});saveHistory(h);renderHistory();}
function renderHistory(){const h=loadHistory();historyEl.innerHTML="";for(let i=0;i<3;i++){if(h[i]){historyEl.innerHTML+=`<div class="hbox"><span>${h[i].n}</span><span class="hservice">${h[i].s}</span></div>`}else{historyEl.innerHTML+=`<div class="hbox"></div>`}}}

/* load state */
async function loadState(){try{const r=await fetch(URL+"?action=state&service="+getService());const d=await r.json();phoneEl.textContent=d.current||"";remEl.textContent=d.remaining||"0";}catch(e){showToast("Network error");}}

/* buy number */
async function buy(){showToast("Processingâ€¦");try{const r=await fetch(URL+"?action=pop&service="+getService());const d=await r.json();if(d.status==="ok"){phoneEl.textContent=d.value;remEl.textContent=d.remaining;addHistory(d.value);showToast("Success");}else{showToast("Out of stock");}}catch(e){showToast("Network error");}}

/* events */
document.getElementById("btnBuy").onclick=buy;
document.getElementById("btnCopy").onclick=async()=>{if(!phoneEl.textContent) return showToast("Nothing");await navigator.clipboard.writeText(phoneEl.textContent);addHistory(phoneEl.textContent);showToast("Copied");};
document.getElementById("getcode").onclick=()=>window.open(GETCODE,"_blank");
document.querySelectorAll(".tick").forEach(t=>t.onclick=()=>{setService(t.dataset.service);loadState();});

/* init */
(function(){setService(getService());loadState();renderHistory();})();
</script>

</body>
</html>
